<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="dist/swagger-editor.css" />
    <link rel="stylesheet" href="dist/custom/swagger-editor-custom.css" />
    <link
      rel="icon"
      type="image/png"
      href="dist/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="dist/favicon-16x16.png"
      sizes="16x16"
    />

    <script src="./dist/swagger-editor-bundle.js"></script>
    <script src="./dist/swagger-editor-standalone-preset.js"></script>
    <script src="fileSaver.js"></script>
  </head>
  <body onload="loadSwaggerEditor()">
    <h2>SWAGGER EDITOR INTEGRATION</h2>

    <div class="container">
      <div>
        Name: <input type="text" name="name" id="name" /><br />
        Version: <input type="text" name="version" id="version" /><br />
        <button name="submit" onclick="saveSwaggerFileContent()">ADD</button>
        <button name="reset">RESET</button>
      </div>

      <div id="swagger-editor"></div>

      <script>
        function loadSwaggerEditor() {
          //url: "http://httpbin.org/status/200",
          const editor = SwaggerEditorBundle({
            dom_id: "#swagger-editor",
            layout: "StandaloneLayout",
            presets: [SwaggerEditorStandalonePreset]
          });
          editor.specActions.updateSpec(" ");
          //const content = window.localStorage.getItem('swagger-editor-content');
          window.editor = editor;
        }

        function saveSwaggerFileContent() {
          var fileName = document.getElementById("name").value;
          var version = document.getElementById("version").value;
          const content = window.localStorage.getItem("swagger-editor-content");

          var blob = new Blob([content], {
            type: "application/json;charset=utf-8"
          });
          saveAs(blob, fileName + "_" + version + ".json");
        }
      </script>
    </div>
  </body>
</html>
