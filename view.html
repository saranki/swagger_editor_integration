<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="dist/swagger-ui.css" />
    <link
      rel="icon"
      type="image/png"
      href="dist/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="dist/favicon-16x16.png"
      sizes="16x16"
    />


    <script src="./dist/swagger-ui-bundle.js" async></script>
    <script src="./dist/swagger-ui-standalone-preset.js" async></script>
    <script src="fileSaver.js" async></script>
  </head>
  <body onload="loadSwaggerEditor()">

    <h2>HTML Forms</h2>

    <div class="container">
      <input
        type="file"
        id="fileForUpload"
        onchange="loadFileContentToSwagger()"
      />
      <p id="contents"></p>
    </div>

    <div id="swagger-ui"></div>

    <script>
      function loadFileContentToSwagger() {
        var file = document.getElementById("fileForUpload").files[0];
        if (file) {
          var reader = new FileReader();
          reader.readAsText(file, "UTF-8");
          reader.onload = function(evt) {
            document.getElementById("contents").innerHTML = evt.target.result;
            ui.specActions.updateSpec(evt.target.result);
          };
          reader.onerror = function(evt) {
            document.getElementById("contents").innerHTML =
              "error reading file";
          };
        }
      }

      function loadSwaggerEditor() {
        //url: "http://httpbin.org/status/200",

        const swaggerConfigs = {
          dom_id: '#swagger-ui',
          layout: 'BaseLayout',
          presets: [SwaggerUIBundle.presets.apis,
      SwaggerUIBundle.SwaggerUIStandalonePreset]
        };

        const ui = SwaggerUIBundle(swaggerConfigs);
        //ui.specActions.updateSpec(' ');
        //const content = window.localStorage.getItem("swagger-ui-content");
        window.ui = ui;
      }
    </script>
  </body>
</html>
